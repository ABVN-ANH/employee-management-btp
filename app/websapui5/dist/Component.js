sap.ui.define(["sap/ui/core/UIComponent","websapui5/model/models","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel"],(e,o,n,t)=>{"use strict";return e.extend("websapui5.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(o.createDeviceModel(),"device");var t=this;var r=new n({userRole:"Viewer"});this.setModel(r,"app");console.log("[DEBUG][Component.js] Set app model with userRole:",r.getProperty("/userRole"));fetch("/odata/v4/employee-management/userInfo",{credentials:"include"}).then(function(e){if(!e.ok)throw new Error("Failed to fetch user info");return e.json()}).then(function(e){var o=e.value||e;console.log("[DEBUG][Component.js] /userInfo response:",o,"roles type:",typeof o.roles,"roles value:",o.roles);var n="Viewer";if(o&&o.roles){if(Array.isArray(o.roles)&&o.roles.includes("Admin")||typeof o.roles==="object"&&(o.roles.Admin===1||o.roles.Admin===true)){n="Admin"}}r.setProperty("/userRole",n);console.log("[DEBUG][Component.js] userRole in app model (from backend):",n)}).catch(function(e){console.warn("[DEBUG][Component.js] Could not fetch user info, defaulting to Viewer",e)});this.getRouter().initialize()}})});
//# sourceMappingURL=Component.js.map